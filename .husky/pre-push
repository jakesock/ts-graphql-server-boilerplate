#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "\nğŸ”¥ Running pre-push hook..."

# Check code style
echo "\nâœ¨ Checking code style..."
yarn check:format ||
(
  echo 'âŒ Prettier Check Failed. âŒ
          Run yarn format, add changes to git and try to commit again.';
  false;
)

# Lint code
echo "\nğŸ” Linting code..."
yarn check:lint ||
(
  echo 'âŒ ESlint Check Failed. âŒ
          Make the required changes listed above, add changes to git and try to commit again.'
  false;
)

# Check typescript types
echo "\nğŸ¤“ Checking typescript types..."
yarn check:types ||
(
  echo 'âŒ Type Check Failed. âŒ
            Make the required changes listed above, add changes to git and try to commit again.'
  false;
)

# Test all workspaces
echo "\nğŸ§ª Running tests..."
yarn test ||
(
  echo 'âŒ Testing Failed. âŒ
            View the errors above to see why your tests failed.'
  false;
)

# Build all workspaces
echo "\nğŸš§ Checking builds..."
yarn build ||
(
  echo 'âŒ Build Failed. âŒ
            View the errors above to see why your build failed.'
  false;
)

echo "\nğŸ‰ Done running pre-push hook! Pushing your commits now!\n"
